<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Pile ou Face - Ticket</title>
  <style>
    body { font-family: Arial, sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:#222; }
    .ticket {
      width: 300px; height: 400px; background: linear-gradient(135deg,#001f3f,#00aaff);
      border-radius: 15px; color:#fff; text-align:center; position:relative; padding:20px;
    }
    .logo { position:absolute; top:10px; left:10px; font-size:18px; font-weight:bold; }
    .coin {
      width:120px; height:120px; margin:40px auto; border-radius:50%; background:gold;
      display:flex; justify-content:center; align-items:center; font-size:28px; font-weight:bold; color:#222;
    }
    .gain {
      margin-top:20px; background:#fff; color:#000; border-radius:10px; padding:10px; font-size:20px; font-weight:bold;
    }
    .id { position:absolute; bottom:10px; right:10px; font-size:14px; }
  </style>
</head>
<body>
  <div class="ticket">
    <div class="logo">ðŸŽ² GDJ</div>
    <div class="coin" id="coin">?</div>
    <div class="gain" id="gain">Zone gain</div>
    <div class="id" id="ticketId">#0001</div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    const code = params.get("code");

    fetch(`/api/pof/ticket/${id}?code=${code}`)
      .then(r=>r.json())
      .then(data=>{
        if(data.error){
          document.getElementById("coin").innerText="X";
          document.getElementById("gain").innerText=data.error;
        } else {
          document.getElementById("coin").innerText=data.type;
          document.getElementById("gain").innerText=data.gain==="0" ? "Perdu" : "GagnÃ© " + data.gain;
          document.getElementById("ticketId").innerText="#"+data.id;
        }
      });
  </script>
</body>
</html>
